(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),o=n(16),a=n.n(o),u=n(3),i=n(4),s=n.n(i),l="/api/persons",d={getAll:function(){return s.a.get(l).then((function(e){return e.data}))},create:function(e){return s.a.post(l,e).then((function(e){return e.data}))},update:function(e,t){return s.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return s.a.delete("".concat(l,"/").concat(e))}},j=(n(39),n(0)),b=function(e){var t=e.addNameAndNumber,n=e.newName,c=e.newNumber,r=e.setNewName,o=e.setNewNumber;return Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsx)("h2",{children:" Add a new contact info: "}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("label",{children:["Name:",Object(j.jsx)("input",{type:"text",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(j.jsx)("br",{}),Object(j.jsxs)("label",{children:["Number:",Object(j.jsx)("input",{type:"tel",value:c,onChange:function(e){return o(e.target.value)}})]})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){return Object(j.jsxs)("li",{children:[" ",Object(j.jsx)("strong",{children:e.person.name})," ",e.person.number," ",Object(j.jsx)("button",{type:"button",onClick:function(){e.removePerson(e.person.id,e.person.name)},children:"delete"})]})},m=function(e){return Object(j.jsx)("ul",{className:"persons__container",children:e.contactsToShow.map((function(t){return Object(j.jsx)(h,{person:t,removePerson:e.removePerson},t.name+t.id)}))})},f=function(e){return Object(j.jsx)("p",{children:Object(j.jsxs)("label",{children:["Only show contacts starting with"," ",Object(j.jsx)("input",{type:"text",value:e.currentFilter,onChange:function(t){return e.setNewFilter(t.target.value)}})]})})},O=function(e){var t=e.message,n=e.isError;return null===t?null:Object(j.jsx)("div",{className:n?"message__container message__container--error":"message__container",children:t})},p=function(){var e=Object(c.useState)([{}]),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(u.a)(o,2),i=a[0],s=a[1],l=Object(c.useState)(""),h=Object(u.a)(l,2),p=h[0],v=h[1],x=Object(c.useState)(""),w=Object(u.a)(x,2),g=w[0],N=w[1],y=Object(c.useState)(null),S=Object(u.a)(y,2),C=S[0],k=S[1],_=Object(c.useState)(!0),P=Object(u.a)(_,2),A=P[0],L=P[1];Object(c.useEffect)((function(){document.title="Phonebook, part3";d.getAll().then((function(e){r(e)}))}),[]);var D=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;k(e),L(t),setTimeout((function(){k(null)}),1e3*n)},E=n.filter((function(e){return 0===i.length||e.name.toLowerCase().indexOf(i.toLowerCase())>-1}));return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Phonebook"}),Object(j.jsx)(O,{message:C,isError:A}),Object(j.jsx)(b,{addNameAndNumber:function(e){e.preventDefault();var t=n.find((function(e){return e.name.trim().toLowerCase()===p.trim().toLowerCase()})),c={name:p,number:g};"object"!==typeof t||null===t?d.create(c).then((function(e){r(n.concat(e)),D("Successfully added ".concat(e.name)),v(""),N("")})).catch((function(e){D("Could not add name and number to the server \u2013 please check your input values",!0),console.log("error while creating:",e)})):window.confirm("".concat(p," is already added to phonebook, replace the old number with a new one?"))&&d.update(t.id,c).then((function(e){r(n.map((function(n){return n.id===t.id?e:n}))),D("Successfully updated ".concat(e.name))})).catch((function(e){D("Could not update, ".concat(p," is already missing from the server."),!0,5)}))},newName:p,newNumber:g,setNewName:v,setNewNumber:N}),Object(j.jsx)("h2",{children:"List of contacts in phonebook"}),Object(j.jsx)(f,{currentFilter:i,setNewFilter:s}),Object(j.jsx)(m,{contactsToShow:E,removePerson:function(e,t){if(!window.confirm("Delete ".concat(t)))return!1;d.remove(e).then((function(t){200===t.status&&D("Successfully removed the person with ID ".concat(e))})).catch((function(t){D("Having problems with removal, is the ID: ".concat(e," deleted already?"),!0)})),r(n.filter((function(t){return t.id!==e})))}})]})};a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(p,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.c9319850.chunk.js.map